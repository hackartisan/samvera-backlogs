Refactoring test suite for better effeciency and speed
