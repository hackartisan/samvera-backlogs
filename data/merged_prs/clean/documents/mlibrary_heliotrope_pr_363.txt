Refactor migrations for sub brands table.
The sub brands table has a self referential foreign key.  The foreign key constraint is a requirement of active record associations belongs_to or has_one. Creating the table and the foreign key constraint all in one statement fails, because the target of the foreign key needs to exist first.  So, splitting up the create and adding foreign key constraints into sequential steps solves this problem and allows db:migrate to run on MySQL. I have qualms about modifying an existing migration in place, because that means all the devs need to drop the db and rerun all the migrations.  On the other hand, it was a bad migration to begin with, so deleting it and making two more would also have necessitated dropping the db.  In short, blow away the db and start over after this PR is merged. Prior to merging this PR, test that the functionality is as expected in the staging environment. Closes #234