refactor generation of singleton variable to a method
