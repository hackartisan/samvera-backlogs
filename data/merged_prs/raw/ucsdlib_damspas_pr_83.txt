Changed to use the #reject method instead of the bang #reject!.
See https://lib-jira.ucsd.edu:8443/browse/DHH-389. The bang #reject! method may return nil unexpectedly when there is no matched for rejecting.