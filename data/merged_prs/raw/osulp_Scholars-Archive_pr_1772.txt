Feature/preservation with bags
fix #1726