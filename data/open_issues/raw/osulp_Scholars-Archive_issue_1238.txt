Some batch uploads skipping workflow step & losing file
Using Batch upload function: So, when I do batch uploads, I add all the files and shared metadata. I wait for everything to cycle through and look at each document individually, add more metadata, and save it. It appears that the system OFTEN takes an initial, unedited version of the upload without a file and makes it public, while the one I added metadata to goes through the review submissions queue -- so there are two items (or more! one had two extras) with separate IDs. I don't see a pattern right now. Although it seems to happen to about half the files in any given batch. Public without file: https://ir.library.oregonstate.edu/concern/technical_reports/d217qv84f Related to #1278!
ALSO: Some dupe files are created as file-less non-entities:  https://ir.library.oregonstate.edu/concern/technical_reports/2r36v4057  ![screen shot 2018-03-19 at 11 46 21 am](https://user-images.githubusercontent.com/33705514/37615719-309bd6aa-2b6b-11e8-83a6-d92a843d3cb6.png) There are a bunch of these hanging out in SA limbo. They are not in the approval queue; they're found by going into Works. Here is a partial list:  https://ir.library.oregonstate.edu/concern/technical_reports/qn59q8576 https://ir.library.oregonstate.edu/concern/technical_reports/pk02cg43q https://ir.library.oregonstate.edu/concern/technical_reports/vq27zt76m https://ir.library.oregonstate.edu/concern/technical_reports/tt44ps40m https://ir.library.oregonstate.edu/concern/conference_proceedings_or_journals/02871201s
The logs show these failures are due to database Deadlocks happening at unfortunate times. We seem to be getting far fewer of these lately, but the problem does still remain.   See ticket #1345 
This is still happening:  sx61ds139 4m90f205b  #1278