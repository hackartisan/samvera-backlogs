ObjectNotFound Error during embargo lifting
Descriptive summary From Cron Deamon emails, we now know about an exception that may occur when running task expire_embargoes.rake Error Backtrace: Deploy revision Deployed master@682b6d@20190917213240 parsed from /data0/hydra/revisions.log file. Enthusiastically expiring elapsed embargoes rake aborted! ActiveFedora::ObjectNotFoundError: Couldn't find ActiveFedora::Base with 'id'=3x816m761 /data0/hydra/shared/bundle/ruby/2.5.0/gems/active-fedora-11.5.4/lib/active_fedora/relation/finder_methods.rb:201:in `raise_record_not_found_exception!' /data0/hydra/shared/bundle/ruby/2.5.0/gems/active-fedora-11.5.4/lib/active_fedora/relation/finder_methods.rb:195:in `load_from_fedora' /data0/hydra/shared/bundle/ruby/2.5.0/gems/active-fedora-11.5.4/lib/active_fedora/relation/finder_methods.rb:181:in `find_one' /data0/hydra/shared/bundle/ruby/2.5.0/gems/active-fedora-11.5.4/lib/active_fedora/relation/finder_methods.rb:234:in `find_with_ids' /data0/hydra/shared/bundle/ruby/2.5.0/gems/active-fedora-11.5.4/lib/active_fedora/relation/finder_methods.rb:52:in `find' /data0/hydra/shared/bundle/ruby/2.5.0/gems/active-fedora-11.5.4/lib/active_fedora/querying.rb:3:in `find' /data0/hydra/releases/20190917213240/lib/scholars_archive/embargoes/embargo_releaser.rb:12:in `block in expire_embargoes' /data0/hydra/releases/20190917213240/lib/scholars_archive/embargoes/embargo_releaser.rb:11:in `each' /data0/hydra/releases/20190917213240/lib/scholars_archive/embargoes/embargo_releaser.rb:11:in `expire_embargoes' /data0/hydra/releases/20190917213240/lib/tasks/expire_embargoes.rake:5:in `block (2 levels) in <top (required)>' /data0/hydra/shared/bundle/ruby/2.5.0/gems/honeycomb-beeline-1.0.0/lib/honeycomb/integrations/rake.rb:21:in `block in execute' /data0/hydra/shared/bundle/ruby/2.5.0/gems/honeycomb-beeline-1.0.0/lib/honeycomb/client.rb:54:in `start_span' /data0/hydra/shared/bundle/ruby/2.5.0/gems/honeycomb-beeline-1.0.0/lib/honeycomb/integrations/rake.rb:16:in `execute' /data0/hydra/shared/bundle/ruby/2.5.0/gems/rake-12.3.3/exe/rake:27:in `<top (required)>' /usr/local/deploy-rails/.rbenv/versions/2.5.5/bin/bundle:23:in `load' /usr/local/deploy-rails/.rbenv/versions/2.5.5/bin/bundle:23:in `<main>' Tasks: TOP => scholars_archive:expire_embargoes (See full trace by running task with --trace)  Expected behavior It should log and then skip a work if it doesn't exists or breaks with an exception. Actual behavior It aborts the rake task. Steps to reproduce the behavior NA Related work NA