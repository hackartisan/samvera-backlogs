ChangeSetPersisters are not thread-safe
The problem is this: For a single ChangeSetPersister in memory, assume I save two resources, each in their own transaction, and they add files. Everything will work fine, except that buffer_into_index creates child change set persisters with their own delayed_queue and created_file_sets which then override the parent's delayed_queue. That happens here: https://github.com/pulibrary/figgy/blob/master/app/change_set_persisters/change_set_persister.rb#L105 We need to make it so that I can save multiple change sets through the same persister, have transactions work, and they won't run into one another.